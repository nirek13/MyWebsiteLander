<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaxy Generator</title>

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="./style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Protest+Guerrilla&display=swap" rel="stylesheet">

    <style>
        /* Fade effect */
        body {
            margin: 0;
            transition: background-color 1s ease; /* Transition for background color */
        }
        #main-content, #new-page-content {
            transition: opacity 1s ease; /* Transition for opacity */
        }
        .fade-out {
            opacity: 0; /* Set opacity to 0 for fade-out effect */
        }
        .fade-in {
            opacity: 1; /* Set opacity to 1 for fade-in effect */
        }
        #new-page-content {
            display: none;
            opacity: 0;
        }

        /* Centered layout for new content */
        #new-page-content {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            color: white;
        }

        /* Star styles */
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 3s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body>
<div id="main-content">
    <!-- Canvas for Three.js rendering -->
    <canvas class="webgl"></canvas>

    <!-- HUD Title -->
    <div>
        <h1 id="hud" class="exosky shiny-text top-left-text protest-guerrilla-regular">Voyager-O</h1>

        <!-- Additional text -->
        <p class="brag">A Satellite Campus Production</p>
    </div>

    <!-- Scroll-triggered animation content -->
    <div class="scroll-animation">
        <p class="scrolled">This content will animate when you scroll!</p>
        <p>Scroll down to see the animation!</p>
    </div>
</div>

<!-- Placeholder for new page content -->
<div id="new-page-content">
    <h1>Welcome to the Starry Skies!</h1>
    <p>Dive into the starry skies that unite us all, no matter the planet!</p>
    <p>This is your new page content without reloading the page.</p>
    <button id="spacey-button">Explore the Stars</button>
</div>

<script>
    const mainContent = document.getElementById('main-content');
    const newPageContent = document.getElementById('new-page-content');

    // Event listener for scrolling to switch content
    window.addEventListener('scroll', () => {
        console.log('Scrolling');
        let currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;

        // When the user scrolls down, initiate fade out and content switch
        if (true) {
            setTimeout(() => {
                mainContent.style.display = 'none';
                newPageContent.style.display = 'block';
                newPageContent.style.opacity = 1;
                document.body.style.backgroundColor = 'black';
                newPageContent.classList.add('fade-in');
            }, 1000);
            mainContent.classList.add('fade-out');
            newPageContent.style.display = 'block';
            console.log('Switching content');

            setTimeout(() => {
                mainContent.style.display = 'none';
                newPageContent.style.display = 'block';
                newPageContent.style.opacity = 1;
                document.body.style.backgroundColor = 'black';
                newPageContent.classList.add('fade-in');
            }, 1000);
        }
    });

    // Function to create stars in the background
    function createStars() {
        const starField = document.getElementById('new-page-content');
        starField.className = 'stars';
        document.body.appendChild(starField);

        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';

            const size = Math.random() * 3 + 1;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.top = `${Math.random() * 100}vh`;
            star.style.left = `${Math.random() * 100}vw`;

            starField.appendChild(star);
        }
    }

    createStars();
</script>

<script type="module" src="./index.js"></script>

</body>
</html>
